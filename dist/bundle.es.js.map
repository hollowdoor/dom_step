{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import nextElementSibling from 'dom-next-element-sibling';\nimport previousElementSibling from 'dom-previous-element-sibling';\nimport rawObject from 'raw-object';\nimport localNaN from 'is-nan';\n//traverser\n\nconst find = rawObject({\n    next: nextElementSibling,\n    prev: previousElementSibling\n});\n\nconst directions = rawObject({\n    left(element, range, traverse = 'prev'){\n        let near = find[traverse];\n        let current = near(element);\n        let [rect1, rect2] = getRects(element, current);\n\n        if(isWest(rect1, rect2, range)){\n            return current;\n        }\n\n        while(current = near(current)){\n            let [rect2] = getRects(current);\n            if(isWest(rect1, rect2, range)){\n                return current;\n            }\n        }\n    },\n    up(element, range, traverse = 'prev'){\n        let near = find[traverse];\n        let current = near(element);\n        let [rect1, rect2] = getRects(element, current);\n\n        if(isNorth(rect1, rect2, range)){\n            return current;\n        }\n\n        while(current = near(current)){\n            let [rect2] = getRects(current);\n            if(isNorth(rect1, rect2, range)){\n                return current;\n            }\n        }\n    },\n    right(element, range, traverse = 'next'){\n        let near = find[traverse];\n        let current = near(element);\n        let [rect1, rect2] = getRects(element, current);\n\n        if(isEast(rect1, rect2, range)){\n            return current;\n        }\n\n        while(current = near(current)){\n            let [rect2] = getRects(current);\n            if(isEast(rect1, rect2, range)){\n                return current;\n            }\n        }\n    },\n    down(element, range, traverse = 'next'){\n        let near = find[traverse];\n        let current = near(element);\n        let [rect1, rect2] = getRects(element, current);\n\n        if(isSouth(rect1, rect2, range)){\n            return current;\n        }\n\n        while(current = near(current)){\n            let [rect2] = getRects(current);\n            if(isSouth(rect1, rect2, range)){\n                return current;\n            }\n        }\n    }\n});\n\nexport default function step(element, direction, {\n    range = 1,\n    traverse\n} = {}){\n    if(directions[direction] === void 0){\n        throw new TypeError(`direction should be up, down, left, or right. Instead direction is equal to ${direction}.`);\n    }\n\n    if([undefined, 'next', 'prev'].indexOf(traverse) === -1){\n        throw new TypeError(`options.traverse should be \"next\", \"prev\", or undefined. Instead options.traverse is equal to ${traverse}.`);\n    }\n\n    if(localNaN(range)){\n        throw new TypeError(`options.range should be a number. Instead options.range is equal to ${range}`);\n    }\n    return directions[direction](element, range, traverse);\n}\n\nfunction isWest(rect1, rect2, range){\n    if(rect1.left - rect2.right <= range){\n        return hReachable(rect1, rect2);\n    }\n    return false;\n}\n\nfunction isNorth(rect1, rect2, range){\n    if(rect1.top - rect2.bottom <= range){\n        return vReachable(rect1, rect2);\n    }\n    return false;\n}\n\nfunction isEast(rect1, rect2, range){\n    if(rect2.left - rect1.right <= range){\n        return hReachable(rect1, rect2);\n    }\n    return false;\n}\n\nfunction isSouth(rect1, rect2, range){\n    if(rect2.top - rect1.bottom <= range){\n        return vReachable(rect1, rect2);\n    }\n    return false;\n}\n\n//(h) horizontal\n//(v) vertical\n\nfunction hReachable(rect1, rect2, range){\n    let c = hCenter(rect1);\n    return rect2.bottom > c || rect2.top < c;\n    //return (rect2.top <= rect1.top && rect2.bottom > rect1.top);\n}\n\nfunction vReachable(rect1, rect2){\n    let c = vCenter(rect1);\n    return rect2.right > c || rect2.left < c;\n    //return (rect2.left <= rect1.left && rect2.right > rect1.left);\n}\n\nfunction vCenter(rect){\n    return rect.bottom - rect.top / 2;\n}\n\nfunction hCenter(rect){\n    return rect.right - rect.left / 2;\n}\n\nfunction getRects(...elements){\n    return elements.map(getRect);\n}\n\nfunction getRect(e){\n    return e.getBoundingClientRect();\n}\n"],"names":["const","let","rect2"],"mappings":"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"}