{"version":3,"file":"bundle.js","sources":["../src/lib/iselement.js","../src/lib/match.js","../src/lib/compass.js","../src/index.js"],"sourcesContent":["export default function isElement(input){\n  return (input != null)\n    && (typeof input === 'object')\n    && (input.nodeType === Node.ELEMENT_NODE)\n    && (typeof input.style === 'object')\n    && (typeof input.ownerDocument === 'object');\n}\n","import nextElementSibling from 'dom-next-element-sibling';\nimport previousElementSibling from 'dom-previous-element-sibling';\nimport rawObject from 'raw-object';\n\nconst find = rawObject({\n    next: nextElementSibling,\n    prev: previousElementSibling\n});\n\nexport default function match(isDirection, isEdge, element, range, traverse){\n    let rect1 = getRect(element);\n    let current = element;\n    let near = find[traverse];\n    let parent = element.parentNode;\n\n    if(isEdge(rect1, range, parent)){\n        return;\n    }\n\n    while(current = near(current)){\n        let rect2 = getRect(current);\n\n        if(isDirection(rect1, rect2, range)){\n            return current;\n        }\n    }\n}\n\n//If there are problems with getBoundingClientRect\n//See https://github.com/webmodules/bounding-client-rect\nfunction getRect(e){\n    return e.getBoundingClientRect();\n}\n","export function isWest(rect1, rect2, range){\n    let distance = rect1.left - rect2.right;\n    if(distance > -1 && distance <= range){\n        return vContained(rect1, rect2);\n    }\n    return false;\n}\n\nexport function isNorth(rect1, rect2, range){\n    let distance = rect1.top - rect2.bottom;\n    if(distance > -1 && distance <= range){\n        return hContained(rect1, rect2);\n    }\n    return false;\n}\n\nexport function isEast(rect1, rect2, range){\n    let distance = rect2.left - rect1.right;\n    if(distance > -1 && distance <= range){\n        return vContained(rect1, rect2);\n    }\n    return false;\n}\n\nexport function isSouth(rect1, rect2, range){\n    let distance = rect2.top - rect1.bottom;\n    if(distance > -1 && distance <= range){\n        return hContained(rect1, rect2);\n    }\n    return false;\n}\n\n//(h) horizontal\n//(v) vertical\n\nfunction hContained(rect1, rect2){\n    let c1 = hCenter(rect1);\n    return rect2.left >= rect1.left && rect2.left <= c1\n    || rect2.right <= rect1.right && rect2.right >= c1;\n}\n\nfunction vContained(rect1, rect2){\n    let c1 = vCenter(rect1);\n    return rect2.top >= rect1.top && rect2.top <= c1\n    || rect2.bottom <= rect1.bottom && rect2.bottom >= c1;\n}\n\nfunction vCenter(rect){\n    return rect.top + height(rect) / 2;\n}\n\nfunction hCenter(rect){\n    return rect.left + width(rect) / 2;\n}\n\nfunction height(rect){\n    return rect.bottom - rect.top;\n}\n\nfunction width(rect){\n    return rect.right - rect.left;\n}\n\nexport function westEdge(rect, range, parent){\n    let subject = document\n        .elementFromPoint(rect.left - range, vCenter(rect));\n    return !has(parent, subject);\n}\n\nexport function northEdge(rect, range, parent){\n    let subject = document\n        .elementFromPoint(hCenter(rect), rect.top - range);\n    return !has(parent, subject);\n}\n\nexport function eastEdge(rect, range, parent){\n    let subject = document\n        .elementFromPoint(rect.right + range, vCenter(rect));\n    return !has(parent, subject);\n}\n\nexport function southEdge(rect, range, parent){\n    let subject = document\n        .elementFromPoint(hCenter(rect), rect.bottom + range);\n    return !has(parent, subject);\n}\n\nfunction has(parent, child){\n    return child\n    && (parent === child.parentNode || parent.contains(child));\n}\n\n\n//Visual testing\n/*function point(x, y){\n    let div = document.createElement('div');\n    div.style.width = '4px';\n    div.style.height = '4px';\n    div.style.backgroundColor = 'red';\n    div.style.position = 'absolute';\n    div.style.top = (y - 2) + 'px';\n    div.style.left = (x - 2) + 'px';\n    document.body.appendChild(div);\n}*/\n","import rawObject from 'raw-object';\nimport localNaN from 'is-nan';\nimport isElement from './lib/iselement.js';\nimport match from './lib/match.js';\nimport {\n    isWest, isNorth, isEast, isSouth,\n    westEdge, northEdge, eastEdge, southEdge\n} from './lib/compass.js';\n\nconst directions = rawObject({\n    left(element, range, traverse = 'prev'){\n        return match(isWest, westEdge, element, range, traverse);\n    },\n    up(element, range, traverse = 'prev'){\n        return match(isNorth, northEdge, element, range, traverse);\n    },\n    right(element, range, traverse = 'next'){\n        return match(isEast, eastEdge, element, range, traverse);\n    },\n    down(element, range, traverse = 'next'){\n        return match(isSouth, southEdge, element, range, traverse);\n    }\n});\n\nexport default function step(element, direction, {\n    range = 1,\n    traverse\n} = {}){\n\n    if(!isElement(element)){\n        throw new TypeError(`element is not a DOM element. Instead element is equal to ${element}.`)\n    }\n\n    if(directions[direction] === void 0){\n        throw new TypeError(`direction should be up, down, left, or right. Instead direction is equal to ${direction}.`);\n    }\n\n    if([undefined, 'next', 'prev'].indexOf(traverse) === -1){\n        throw new TypeError(`options.traverse should be \"next\", \"prev\", or undefined. Instead options.traverse is equal to ${traverse}.`);\n    }\n\n    if(localNaN(range)){\n        throw new TypeError(`options.range should be a number. Instead options.range is equal to ${range}`);\n    }\n\n    return directions[direction](element, range, traverse);\n}\n"],"names":["const","let"],"mappings":";;;;;;;;;AAAe,SAAS,SAAS,CAAC,KAAK,CAAC;EACtC,OAAO,CAAC,KAAK,IAAI,IAAI;QACf,OAAO,KAAK,KAAK,QAAQ,CAAC;QAC1B,KAAK,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,CAAC;QACrC,OAAO,KAAK,CAAC,KAAK,KAAK,QAAQ,CAAC;QAChC,OAAO,KAAK,CAAC,aAAa,KAAK,QAAQ,CAAC,CAAC;CAChD;;ACFDA,IAAM,IAAI,GAAG,SAAS,CAAC;IACnB,IAAI,EAAE,kBAAkB;IACxB,IAAI,EAAE,sBAAsB;CAC/B,CAAC,CAAC;;AAEH,AAAe,SAAS,KAAK,CAAC,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC;IACxEC,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;IAC7BA,IAAI,OAAO,GAAG,OAAO,CAAC;IACtBA,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC1BA,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC;;IAEhC,GAAG,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QAC5B,OAAO;KACV;;IAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;QAC1BA,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;QAE7B,GAAG,WAAW,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;YAChC,OAAO,OAAO,CAAC;SAClB;KACJ;CACJ;;;;AAID,SAAS,OAAO,CAAC,CAAC,CAAC;IACf,OAAO,CAAC,CAAC,qBAAqB,EAAE,CAAC;CACpC;;AChCM,SAAS,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IACvCA,IAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;IACxC,GAAG,QAAQ,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,KAAK,CAAC;QAClC,OAAO,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KACnC;IACD,OAAO,KAAK,CAAC;CAChB;;AAED,AAAO,SAAS,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IACxCA,IAAI,QAAQ,GAAG,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;IACxC,GAAG,QAAQ,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,KAAK,CAAC;QAClC,OAAO,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KACnC;IACD,OAAO,KAAK,CAAC;CAChB;;AAED,AAAO,SAAS,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IACvCA,IAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;IACxC,GAAG,QAAQ,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,KAAK,CAAC;QAClC,OAAO,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KACnC;IACD,OAAO,KAAK,CAAC;CAChB;;AAED,AAAO,SAAS,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;IACxCA,IAAI,QAAQ,GAAG,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;IACxC,GAAG,QAAQ,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,KAAK,CAAC;QAClC,OAAO,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KACnC;IACD,OAAO,KAAK,CAAC;CAChB;;;;;AAKD,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC;IAC7BA,IAAI,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;IACxB,OAAO,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,IAAI,EAAE;OAChD,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;CACtD;;AAED,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC;IAC7BA,IAAI,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;IACxB,OAAO,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,IAAI,EAAE;OAC7C,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC;CACzD;;AAED,SAAS,OAAO,CAAC,IAAI,CAAC;IAClB,OAAO,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;CACtC;;AAED,SAAS,OAAO,CAAC,IAAI,CAAC;IAClB,OAAO,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;CACtC;;AAED,SAAS,MAAM,CAAC,IAAI,CAAC;IACjB,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC;CACjC;;AAED,SAAS,KAAK,CAAC,IAAI,CAAC;IAChB,OAAO,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;CACjC;;AAED,AAAO,SAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;IACzCA,IAAI,OAAO,GAAG,QAAQ;SACjB,gBAAgB,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IACxD,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;CAChC;;AAED,AAAO,SAAS,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;IAC1CA,IAAI,OAAO,GAAG,QAAQ;SACjB,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC;IACvD,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;CAChC;;AAED,AAAO,SAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;IACzCA,IAAI,OAAO,GAAG,QAAQ;SACjB,gBAAgB,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IACzD,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;CAChC;;AAED,AAAO,SAAS,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;IAC1CA,IAAI,OAAO,GAAG,QAAQ;SACjB,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;IAC1D,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;CAChC;;AAED,SAAS,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC;IACvB,OAAO,KAAK;QACR,MAAM,KAAK,KAAK,CAAC,UAAU,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;CAC9D;;;;;;;;;;;;;;;ACjFDD,IAAM,UAAU,GAAG,SAAS,CAAC;IACzB,IAAI,eAAA,CAAC,OAAO,EAAE,KAAK,EAAE,QAAiB,CAAC;2CAAV,GAAG,MAAM;;QAClC,OAAO,KAAK,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;KAC5D;IACD,EAAE,aAAA,CAAC,OAAO,EAAE,KAAK,EAAE,QAAiB,CAAC;2CAAV,GAAG,MAAM;;QAChC,OAAO,KAAK,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;KAC9D;IACD,KAAK,gBAAA,CAAC,OAAO,EAAE,KAAK,EAAE,QAAiB,CAAC;2CAAV,GAAG,MAAM;;QACnC,OAAO,KAAK,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;KAC5D;IACD,IAAI,eAAA,CAAC,OAAO,EAAE,KAAK,EAAE,QAAiB,CAAC;2CAAV,GAAG,MAAM;;QAClC,OAAO,KAAK,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;KAC9D;CACJ,CAAC,CAAC;;AAEH,AAAe,SAAS,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,GAAA,CAG1C;6BAAN,GAAG,EAAE,CAFM;2DAAA,CAAC,CACT;QAAA,QAAQ;;;IAGR,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACnB,MAAM,IAAI,SAAS,EAAC,4DAA2D,GAAE,OAAO,MAAE,EAAE;KAC/F;;IAED,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,CAAC;QAChC,MAAM,IAAI,SAAS,EAAC,8EAA6E,GAAE,SAAS,MAAE,EAAE,CAAC;KACpH;;IAED,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QACpD,MAAM,IAAI,SAAS,EAAC,oGAA+F,GAAE,QAAQ,MAAE,EAAE,CAAC;KACrI;;IAED,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;QACf,MAAM,IAAI,SAAS,EAAC,sEAAqE,GAAE,KAAK,EAAG,CAAC;KACvG;;IAED,OAAO,UAAU,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;CAC1D;;;;"}